2025-10-25 23:59:09,797 INFO app Application startup
2025-10-25 23:59:26,251 INFO app request start: GET http://127.0.0.1:8000/docs
2025-10-25 23:59:26,252 INFO app request complete: GET http://127.0.0.1:8000/docs -> 200
2025-10-25 23:59:26,637 INFO app request start: GET http://127.0.0.1:8000/openapi.json
2025-10-25 23:59:26,711 INFO app request complete: GET http://127.0.0.1:8000/openapi.json -> 200
2025-10-26 00:06:24,165 INFO app Application startup
2025-10-28 00:33:38,744 INFO app Database initialized successfully.
2025-10-28 00:33:44,626 INFO app request start: GET http://localhost:8000/
2025-10-28 00:33:44,627 INFO app request complete: GET http://localhost:8000/ -> 404
2025-10-28 00:33:44,664 INFO app request start: GET http://localhost:8000/favicon.ico
2025-10-28 00:33:44,665 INFO app request complete: GET http://localhost:8000/favicon.ico -> 404
2025-10-28 13:57:21,218 INFO app Database initialized successfully.
2025-10-28 14:00:08,519 INFO app request start: GET http://127.0.0.1:8000/
2025-10-28 14:00:08,520 INFO app request complete: GET http://127.0.0.1:8000/ -> 404
2025-10-28 14:00:08,657 INFO app request start: GET http://127.0.0.1:8000/favicon.ico
2025-10-28 14:00:08,658 INFO app request complete: GET http://127.0.0.1:8000/favicon.ico -> 404
2025-10-28 14:00:18,474 INFO app request start: GET http://127.0.0.1:8000/
2025-10-28 14:00:18,475 INFO app request complete: GET http://127.0.0.1:8000/ -> 404
2025-10-28 14:02:21,944 INFO app request start: GET http://89.191.229.20:8000/docs
2025-10-28 14:02:21,944 INFO app request complete: GET http://89.191.229.20:8000/docs -> 200
2025-10-28 14:02:24,491 INFO app request start: GET http://89.191.229.20:8000/openapi.json
2025-10-28 14:02:24,610 INFO app request complete: GET http://89.191.229.20:8000/openapi.json -> 200
2025-10-28 14:03:04,081 INFO app request start: GET http://89.191.229.20:8000/docs
2025-10-28 14:03:04,081 INFO app request complete: GET http://89.191.229.20:8000/docs -> 200
2025-10-28 14:03:04,281 INFO app request start: GET http://89.191.229.20:8000/openapi.json
2025-10-28 14:03:04,282 INFO app request complete: GET http://89.191.229.20:8000/openapi.json -> 200
2025-10-28 14:03:36,086 INFO app Database initialized successfully.
2025-10-28 14:03:53,639 INFO app request start: GET http://89.191.229.20:8000/
2025-10-28 14:03:53,640 INFO app request complete: GET http://89.191.229.20:8000/ -> 200
2025-10-28 14:03:53,738 INFO app request start: GET http://89.191.229.20:8000/favicon.ico
2025-10-28 14:03:53,739 INFO app request complete: GET http://89.191.229.20:8000/favicon.ico -> 404
2025-10-28 14:04:04,317 INFO app Database initialized successfully.
2025-10-28 14:04:07,234 INFO app Database initialized successfully.
2025-10-28 14:04:09,271 INFO app request start: GET http://89.191.229.20:8000/
2025-10-28 14:04:09,272 INFO app request complete: GET http://89.191.229.20:8000/ -> 200
2025-10-28 14:05:19,438 INFO app request start: GET http://89.191.229.20:8000/docs
2025-10-28 14:05:19,439 INFO app request complete: GET http://89.191.229.20:8000/docs -> 200
2025-10-28 14:05:20,643 INFO app request start: GET http://89.191.229.20:8000/openapi.json
2025-10-28 14:05:20,758 INFO app request complete: GET http://89.191.229.20:8000/openapi.json -> 200
2025-10-28 14:05:24,981 INFO app request start: GET http://89.191.229.20:8000/docs
2025-10-28 14:05:24,981 INFO app request complete: GET http://89.191.229.20:8000/docs -> 200
2025-10-28 14:05:26,484 INFO app request start: GET http://89.191.229.20:8000/openapi.json
2025-10-28 14:05:26,485 INFO app request complete: GET http://89.191.229.20:8000/openapi.json -> 200
2025-10-28 14:07:08,781 INFO app request start: GET http://89.191.229.20:8000/docs
2025-10-28 14:07:08,782 INFO app request complete: GET http://89.191.229.20:8000/docs -> 200
2025-10-28 14:07:08,920 INFO app request start: GET http://89.191.229.20:8000/openapi.json
2025-10-28 14:07:08,921 INFO app request complete: GET http://89.191.229.20:8000/openapi.json -> 200
2025-10-28 14:07:27,795 INFO app request start: GET http://89.191.229.20:8000/docs
2025-10-28 14:07:27,795 INFO app request complete: GET http://89.191.229.20:8000/docs -> 200
2025-10-28 14:07:28,295 INFO app request start: GET http://89.191.229.20:8000/openapi.json
2025-10-28 14:07:28,297 INFO app request complete: GET http://89.191.229.20:8000/openapi.json -> 200
2025-10-28 14:08:43,256 INFO app request start: GET http://89.191.229.20:8000/shops/?active=true
2025-10-28 14:08:43,301 ERROR app Unhandled exception in request
Traceback (most recent call last):
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InsufficientPrivilegeError: permission denied for table shops

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: permission denied for table shops

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/pythonProject/app/main.py", line 38, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/app/routers/shops.py", line 19, in route_list_shops
    shops = await list_shops(db, active_only=True)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/app/crud/shop.py", line 18, in list_shops
    q = await db.execute(select(Shop).where(Shop.is_active == True))
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: permission denied for table shops
[SQL: SELECT shops.id, shops.shop_name, shops.address, shops.lat, shops.lng, shops.tz, shops.open_hours, shops.is_active, shops.created_at 
FROM shops 
WHERE shops.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-10-28 14:10:38,957 INFO app request start: GET http://89.191.229.20:8000/shops/
2025-10-28 14:10:38,961 ERROR app Unhandled exception in request
Traceback (most recent call last):
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.InsufficientPrivilegeError: permission denied for table shops

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: permission denied for table shops

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ubuntu/pythonProject/app/main.py", line 38, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 159, in call_next
    raise app_exc
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/app/routers/shops.py", line 21, in route_list_shops
    shops = await list_shops(db)
            ^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/app/crud/shop.py", line 20, in list_shops
    return await get_all(db, Shop)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/app/crud/base.py", line 42, in get_all
    q = await db.execute(select(model))
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/ubuntu/pythonProject/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: permission denied for table shops
[SQL: SELECT shops.id, shops.shop_name, shops.address, shops.lat, shops.lng, shops.tz, shops.open_hours, shops.is_active, shops.created_at 
FROM shops]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-10-28 14:25:55,553 INFO app request start: GET http://api.ip.pnhttp://api.ip.pn/json
2025-10-28 14:25:55,553 INFO app request complete: GET http://api.ip.pnhttp://api.ip.pn/json -> 404
2025-10-28 14:25:55,713 INFO app request start: GET http://api.ip.pnhttp://api.ip.pn/json
2025-10-28 14:25:55,714 INFO app request complete: GET http://api.ip.pnhttp://api.ip.pn/json -> 404
2025-10-28 14:25:55,871 INFO app request start: GET http://api.ip.pnhttp://api.ip.pn/json
2025-10-28 14:25:55,871 INFO app request complete: GET http://api.ip.pnhttp://api.ip.pn/json -> 404
2025-10-28 14:27:10,634 INFO app request start: GET http://89.191.229.20:8000/shops/
2025-10-28 14:27:10,638 INFO app request complete: GET http://89.191.229.20:8000/shops/ -> 200
2025-10-28 14:30:01,859 INFO app request start: GET http://89.191.229.20:8000/robots.txt
2025-10-28 14:30:01,860 INFO app request complete: GET http://89.191.229.20:8000/robots.txt -> 404
2025-10-28 14:30:03,615 INFO app request start: GET http://89.191.229.20:8000/
2025-10-28 14:30:03,616 INFO app request complete: GET http://89.191.229.20:8000/ -> 200
2025-10-28 14:33:42,311 INFO app request start: GET http://89.191.229.20:8000/shops/
2025-10-28 14:33:42,313 INFO app request complete: GET http://89.191.229.20:8000/shops/ -> 200
2025-10-28 17:17:19,193 INFO app request start: GET http://89.191.229.20:8000/
2025-10-28 17:17:19,194 INFO app request complete: GET http://89.191.229.20:8000/ -> 200
2025-10-28 17:41:21,453 INFO app request start: GET http://89.191.229.20:8000/
2025-10-28 17:41:21,453 INFO app request complete: GET http://89.191.229.20:8000/ -> 200
2025-10-28 17:43:55,106 INFO app request start: GET http://89.191.229.20:8000/
2025-10-28 17:43:55,106 INFO app request complete: GET http://89.191.229.20:8000/ -> 200
2025-11-02 14:54:33,433 INFO app Database initialized successfully.
2025-11-02 15:32:31,511 INFO app Database initialized successfully.
2025-11-02 15:33:27,547 INFO app Database initialized successfully.
2025-11-02 15:39:00,596 INFO app Database initialized successfully.
2025-11-02 23:41:35,818 INFO app Database initialized successfully.
